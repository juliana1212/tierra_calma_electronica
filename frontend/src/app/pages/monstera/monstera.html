<section class="monstera-wrapper">
  <div class="monstera-frame">
    <!-- Imagen sobrepuesta -->
    <div class="frame-imagen"></div>

    <!-- Contenido textual -->
    <div class="frame-content">
      <h1 class="titulo-monstera">Monstera</h1>
      <button class="btn-riego" (click)="activarRiego()">Activar riego ahora</button>
    </div>
  </div>
</section>

<!-- ====== MONITOREO EN TIEMPO REAL ====== -->
<section class="monit-wrapper">
  <div class="monit-container">

    <div class="monit-grid">
      <!-- Datos del sensor -->
      <div class="monit-card">
        <h3 class="monit-card-title">Datos del sensor</h3>

        <div class="monit-sensor-value">
          {{ isConnected ? realtimeData : '---' }}
        </div>

        <div class="status-chip" [ngClass]="isConnected ? 'status-online' : 'status-offline'">
          <span class="monit-dot"></span>
          {{ isConnected ? 'Conectado' : 'Desconectado' }}
        </div>

        <div class="monit-row">ğŸ”„ ActualizaciÃ³n cada 2s</div>
        <div class="monit-row">ğŸ•’ {{ lastUpdate }}</div>
      </div>

      <!-- Historial de riego -->
      <div class="monit-card">
        <h3 class="monit-card-title">Historial de riego</h3>
        <div class="monit-history-list">
          <div class="history-item" *ngFor="let item of historialRiego">
            <span class="history-time">{{ item.hora }}</span>
            <span class="history-msg">
                {{ item.tipo === 'manual' ? 'ğŸ’§ ' : 'âš¡ ' }}{{ item.mensaje }}
            </span>
          </div>
          <div *ngIf="historialRiego.length === 0" class="history-empty">
            No hay registros de riego aÃºn ğŸŒ±
          </div>
        </div>
      </div>
    </div>

    <!-- GrÃ¡fico de humedad -->
    <div class="monit-card">
      <h3 class="monit-card-title">Humedad del suelo y temperatura ambiente</h3>
      <div class="monit-chart">
        <canvas #soilChart></canvas>
      </div>
    </div>
  </div>
</section>

<!-- ====== REGISTRAR CUIDADOS ====== -->
<section class="cuidados-wrapper">
  <div class="cuidados-container">
    <h2 class="cuidados-title">Registrar cuidados</h2>
    <p class="cuidados-text">
      CuÃ©ntale a tu Monstera cÃ³mo la cuidaste hoy.<br>
      Selecciona la fecha y el tipo de cuidado que realizaste: <b>fertilizaciÃ³n o poda</b>. 
      AsÃ­ podrÃ¡s llevar un historial de todo el cariÃ±o que le das a tu planta.
    </p>

    <div class="cuidados-grid">
      <!-- Imagen -->
      <div class="cuidados-img"></div>

      <!-- Formulario -->
      <form class="cuidados-form" (ngSubmit)="guardarCuidado()">
        <!-- Fecha -->
        <label for="fecha">ğŸ“… Fecha</label>
        <input id="fecha" type="date" [(ngModel)]="nuevoCuidado.fecha" name="fecha">

        <!-- Tipo de cuidado -->
        <label for="tipo">ğŸŒ± Tipo de cuidado</label>
        <select id="tipo" [(ngModel)]="nuevoCuidado.tipo" name="tipo">
          <option value="" disabled selected>Selecciona una opciÃ³n</option>
          <option value="fertilizaciÃ³n">FertilizaciÃ³n</option>
          <option value="poda">Poda</option>
        </select>

        <!-- Detalles -->
        <label for="detalles">âœï¸ Detalles</label>
        <textarea id="detalles" [(ngModel)]="nuevoCuidado.detalles" name="detalles" placeholder="Agrega notas sobre cÃ³mo cuidaste tu planta..."></textarea>

        <!-- BotÃ³n -->
        <button type="submit" class="btn-guardar">Guardar cuidado</button>
      </form>
    </div>
  </div>
</section>
