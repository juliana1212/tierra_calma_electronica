<section class="monstera-wrapper">
  <div class="monstera-frame">

    <!-- üåø Informaci√≥n sobre la planta -->
    <div class="info-monstera">
      <h2 class="info-titulo">En armon√≠a con tus plantas</h2>
      <p class="info-texto">
        La Monstera deliciosa, tambi√©n conocida como ‚ÄúCostilla de Ad√°n‚Äù, 
        es una planta tropical que purifica el aire y da un toque natural a tu hogar. 
        Disfruta de su elegancia, hojas exuberantes y su capacidad para adaptarse a interiores luminosos.
      </p>
    </div>

    <!-- üå∏ Imagen y bot√≥n -->
    <div class="frame-centro">
      <div class="arco-imagen"></div>
    </div>

    <!-- üå∫ T√≠tulo y bot√≥n -->
    <div class="frame-content">
      <h1 class="titulo-monstera">Monstera deliciosa</h1>
      <button class="btn-riego" (click)="activarRiego()">Activar riego ahora</button>
    </div>

  </div>
</section>









<!-- ====== MONITOREO EN TIEMPO REAL ====== -->
<section class="monit-wrapper">
  <div class="monit-container">

    <div class="monit-grid">
      <!-- Datos del sensor -->
      <div class="monit-card">
        <h3 class="monit-card-title">Datos del sensor</h3>

        <div class="monit-sensor-value">
          <div *ngIf="isConnected; else sinConexion">
            <b>Temperatura:</b> {{ sensorData.temperatura }}<br>
            <b>Humedad del suelo:</b> {{ sensorData.humedadSuelo }}
          </div>

          <ng-template #sinConexion>
            ---
          </ng-template>
        </div>

        <div class="status-chip" [ngClass]="isConnected ? 'status-online' : 'status-offline'">
          <span class="monit-dot"></span>
          {{ isConnected ? 'Conectado' : 'Desconectado' }}
        </div>

        <div class="monit-row">Actualizaci√≥n cada 2s</div>
        <div class="monit-row">{{ lastUpdate }}</div>
      </div>



      <!-- Historial de riego -->
      <div class="monit-card">
        <h3 class="monit-card-title">Historial de riego</h3>
        <div class="monit-history-list">
          <div class="history-item" *ngFor="let item of historialRiego">
            <span class="history-time">{{ item.hora }}</span>
            <span class="history-msg">
                {{ item.tipo === 'manual' ? '' : '' }}{{ item.mensaje }}
            </span>
          </div>
          <div *ngIf="historialRiego.length === 0" class="history-empty">
            No hay registros de riego a√∫n
          </div>
        </div>
      </div>
    </div>

    <!-- Gr√°fico de humedad -->
    <div class="monit-card">
      <h3 class="monit-card-title">Humedad del suelo y temperatura ambiente</h3>
      <div class="monit-chart">
        <canvas #soilChart></canvas>
      </div>
    </div>
  </div>
</section>

<!-- ====== REGISTRAR CUIDADOS ====== -->
<section class="cuidados-wrapper">
  <div class="cuidados-container">
    <h2 class="cuidados-title">Registrar cuidados</h2>
    <p class="cuidados-text">
      Cu√©ntale a tu Monstera c√≥mo la cuidaste hoy.<br>
      Selecciona la fecha y el tipo de cuidado que realizaste: <b>fertilizaci√≥n o poda</b>. 
      As√≠ podr√°s llevar un historial de todo el cari√±o que le das a tu planta.
    </p>

    <div class="cuidados-grid">
      <!-- Imagen -->
      <div class="cuidados-img"></div>

      <!-- Formulario -->
      <form class="cuidados-form" (ngSubmit)="guardarCuidado()">
        <!-- Fecha -->
        <label for="fecha">Fecha</label>
        <input id="fecha" type="date" [(ngModel)]="nuevoCuidado.fecha" name="fecha">

        <!-- Tipo de cuidado -->
        <label for="tipo">Tipo de cuidado</label>
        <select id="tipo" [(ngModel)]="nuevoCuidado.tipo" name="tipo">
          <option value="" disabled selected>Selecciona una opci√≥n</option>
          <option value="fertilizaci√≥n">Fertilizaci√≥n</option>
          <option value="poda">Poda</option>
        </select>

        <!-- Detalles -->
        <label for="detalles">Detalles</label>
        <textarea id="detalles" [(ngModel)]="nuevoCuidado.detalles" name="detalles" placeholder="Agrega notas sobre c√≥mo cuidaste tu planta..."></textarea>

        <!-- Bot√≥n -->
        <button type="submit" class="btn-guardar">Guardar cuidado</button>
      </form>
    </div>
  </div>
</section>
